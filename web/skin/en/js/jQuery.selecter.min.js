!function(e){var t={addOptions:function(t,n){var i=this,s=jQuery.isFunction(n.url)?n.url():n.url;jQuery.isFunction(n.params)?n.params():n.params;e.ajax({url:s,type:n.type,async:n.async,cache:n.cache,contentType:n.contentType,dataType:n.dataType,success:function(s){var l=[];n.nullText&&l.push('<option value="">'+n.nullText+"</option>");for(var o=0,a=s.length;o<a;o++){var d,c,r,u=s[o],p=core.isPlainObject(u);d=p?u.key:u,c=p?u.text:u,r=p?u.selected:u,r=d==n.selectedKey?"selected":"",l.push('<option value="'+d+'" '+r+">"+c+"</option>")}e(t).html(l.join("")),i.dress(t,n)}})},dress:function(n,i){var s=this,l=e(n);if(l.data("selecter")){var o=n.selectedIndex,a=l.find("option").eq(o).text();l.data("selecter").find(":text").val(a)}else{var d=e(s.getSkin(n,i));l.before(d).wrap('<div style="display:none;"></div>'),d.click(function(o){return!l.attr("disabled")&&(e(this).find(":text").focus(),e(this).find("div.ui-selecter-options").is(":visible")?s.clean(e(this)):(e("div.ui-selecter").css("z-index","").find("div.ui-selecter-options").html("").css("display","none"),jQuery.isFunction(i.onDropdown)&&i.onDropdown(n),0!=l.find("option").length&&t.dropdown(e(this),n,i)),void o.stopPropagation())}),e(document).click(function(e){t.clean(d)}),l.data("selecter",d)}},getSkin:function(t,n){var i=e(t),s=[],l="",o="",a="",d="",c="",r="";return i.attr("id")&&(l=' id="'+i.attr("id")+'-selecter"'),i.attr("class")&&(o=" "+i.attr("class")),i.attr("style")&&(a=' style="'+i.attr("style")+'"'),i.attr("disabled")&&(d=' disabled="disabled"'),n.readonly&&(c=' readonly="readonly"'),r=i.find("option:selected").text(),s.push('<div class="ui-text ui-selecter'+o+(d?" ui-text-disabled":"")+'"'+a+">"),s.push('<input type="text"'+l+' class="ui-text-text"'+d+c+' value="'+r+'" placeholder="'+(e(t).attr("placeholder")||"")+'"/>'),s.push('<i class="ui-text-icon iconfont icon-footer-select"></i>'),s.push('<div class="ui-selecter-options"></div>'),s.push("</div>"),s.join("")},dropdown:function(n,i,s){var l=e(i).find("option"),o=l.length,a=s.scrollRange,d=n.find("div.ui-selecter-options"),c=[];d.height(o>a?22*a:"auto"),l.each(function(){var t=e(this),n=t.text(),i=t.attr("disabled");c.push('<li title="'+n+'"'+(i?'class="disabled"  disabled="disabled"':"")+"><label>"+n+"</label></li>")}),d.html('<ul class="ui-selecter-options-ul">'+c.join("")+"</ul>");var r=n.find("li");r.click(function(o){if(e(this).attr("disabled"))return!1;var a=r.index(this);if(jQuery.isFunction(s.onSelect)&&!s.onSelect(i,l.get(a)))return t.clean(n),!1;i.selectedIndex=a,e(i).change();var d=e(i).find("option:eq("+a+")").text();n.find(":text").val(d).focus(),t.clean(n),o.stopPropagation()}).mouseover(function(){return!e(this).attr("disabled")&&void e(this).addClass("hover").siblings().removeClass("hover")}),n.find("li:eq("+i.selectedIndex+")").addClass("hover"),n.css("z-index",100).find("div.ui-selecter-options").css("display","block")},clean:function(e){e.length>0&&e.css("z-index","").find("div.ui-selecter-options").html("").css("display","none")}};e.fn.selecter=function(n){return n=e.extend({},{url:null,params:null,type:"GET",async:!0,cache:!1,dataType:"json",selectedKey:null,nullText:null,contentType:"application/x-www-form-urlencoded",readonly:!0,scrollRange:10,onDropdown:null,onSelect:null},n),this.each(function(){n.url?t.addOptions(this,n):t.dress(this,n)})}}(jQuery);